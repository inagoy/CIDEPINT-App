{% extends "layout.html" %}
{% block title %} Cambiar Contraseña {% endblock %}
{% block head %}
    {{ super() }}
    <script src="{{ url_for('static', filename='js/formValidations.js') }}"></script>
    <script src="{{ url_for('static', filename='js/changePassword.js') }}"></script>
{% endblock %}
{% block content %}
<div class="row align-items-center" >
    <div class="col-7 mx-auto">
        <div class="card bg-light" style="margin-bottom: 100px">
            <div class="card-body">
                <h3 class="mb-4 text-center">Cambiar Contraseña</h3>
                <form method="POST" action="{{ url_for('user.change_password') }}"  id="changePasswordForm" onsubmit="return validateChangePassword()">
                    <div class="form-group">
                        <label for="current_password">Contraseña Actual *:</label>
                        <input 
                            type="password" 
                            class="form-control" 
                            id="inputCurrentPassword" 
                            name="inputCurrentPassword" 
                            placeholder="Ingrese su contraseña actual"
                            onblur="validateChangePassword()"
                            required
                        />
                        <small id="currentPasswordError" class="form-text text-danger"></small>
                    </div>
                    <div class="form-group">
                        <label for="new_password">Nueva Contraseña *:</label>
                        <input 
                            type="password" 
                            class="form-control" 
                            id="inputNewPassword" 
                            name="inputNewPassword" 
                            placeholder="Ingrese su nueva contraseña"
                            onblur="validatePassword('inputNewPassword', 'newPasswordError'); validateChangePassword()"
                            aria-describedby="newPasswordError"
                            required
                        />
                        <small id="newPasswordError" class="form-text text-danger"></small>
                    </div>
                    <div class="form-group">
                        <label for="confirm_password">Confirmar Nueva Contraseña *:</label>
                        <input 
                            type="password" 
                            class="form-control" 
                            id="inputConfirmPassword" 
                            name="inputConfirmPassword" 
                            placeholder="Confirmar nueva contraseña"
                            onblur="validateChangePassword()"
                            aria-describedby="confirmPasswordError"
                            required
                        />
                        <small id="confirmPasswordError" class="form-text text-danger"></small>
                    </div>
                    <div>
                    <button type="submit" class="btn btn-success confirm-button mt-3" style="margin-bottom: 10px">
                        Cambiar Contraseña
                    </button>
                    <br>
                    <a  class="btn btn-primary close-button mt-3" href="{{ url_for('user.view_profile') }}">
                        Cancelar
                    </a>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}